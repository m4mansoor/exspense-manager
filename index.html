<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Management Portal</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <h1><i class="fas fa-wallet"></i> Expense Management Portal</h1>
                <div class="header-actions">
                    <button class="btn btn--outline" id="exportBtn">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <div class="container">
                <!-- Dashboard Overview -->
                <section class="dashboard">
                    <div class="dashboard-grid">
                        <div class="metric-card">
                            <div class="metric-card__icon" style="background: var(--color-bg-3);">
                                <i class="fas fa-coins"></i>
                            </div>
                            <div class="metric-card__content">
                                <h3>Total Capital</h3>
                                <p class="metric-value" id="totalCapital">Rs. 0</p>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-card__icon" style="background: var(--color-bg-1);">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="metric-card__content">
                                <h3>Total Planned</h3>
                                <p class="metric-value" id="totalPlanned">Rs. 0</p>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-card__icon" style="background: var(--color-bg-2);">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="metric-card__content">
                                <h3>Total Paid</h3>
                                <p class="metric-value" id="totalPaid">Rs. 0</p>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-card__icon financial-health-icon" id="financialHealthIcon" style="background: var(--color-bg-5);">
                                <i class="fas fa-heart-pulse"></i>
                            </div>
                            <div class="metric-card__content">
                                <h3>Available Balance</h3>
                                <p class="metric-value" id="availableBalance">Rs. 0</p>
                                <small class="financial-health-text" id="financialHealthText">Calculating...</small>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Charts Section -->
                <section class="charts-section">
                    <div class="charts-grid">
                        <div class="card">
                            <div class="card__header">
                                <h3>Capital Flow vs Expenses</h3>
                            </div>
                            <div class="card__body">
                                <div class="chart-container" style="position: relative; height: 300px;">
                                    <canvas id="flowChart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card__header">
                                <h3>Expense Distribution</h3>
                            </div>
                            <div class="card__body">
                                <div class="chart-container" style="position: relative; height: 300px;">
                                    <canvas id="pieChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Controls Section -->
                <section class="controls-section">
                    <div class="controls-grid">
                        <div class="search-controls">
                            <input type="text" class="form-control" id="searchInput" placeholder="Search transactions...">
                            <select class="form-control" id="categoryFilter">
                                <option value="">All Categories</option>
                            </select>
                            <select class="form-control" id="statusFilter">
                                <option value="">All Transactions</option>
                                <option value="capital">Capital</option>
                                <option value="planned">Planned</option>
                                <option value="paid">Paid</option>
                            </select>
                        </div>
                        
                        <div class="action-controls">
                            <button class="btn btn--primary" id="addCapitalBtn">
                                <i class="fas fa-plus-circle"></i> Add Capital
                            </button>
                            <button class="btn btn--secondary" id="addPlannedBtn">
                                <i class="fas fa-calendar-plus"></i> Add Planned
                            </button>
                            <button class="btn btn--outline" id="addPaidBtn">
                                <i class="fas fa-check"></i> Add Paid
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Tables Section -->
                <section class="tables-section">
                    <div class="tables-grid">
                        <!-- Capital Management -->
                        <div class="card">
                            <div class="card__header">
                                <h3>Capital & Income</h3>
                                <span class="status status--success" id="capitalCount">0 items</span>
                            </div>
                            <div class="card__body">
                                <div class="table-container">
                                    <table class="expense-table" id="capitalTable">
                                        <thead>
                                            <tr>
                                                <th>Source</th>
                                                <th>Amount</th>
                                                <th>Type</th>
                                                <th>Date</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Planned Expenses -->
                        <div class="card">
                            <div class="card__header">
                                <h3>Planned Expenses</h3>
                                <span class="status status--warning" id="plannedCount">0 items</span>
                            </div>
                            <div class="card__body">
                                <div class="table-container">
                                    <table class="expense-table" id="plannedTable">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Amount</th>
                                                <th>Category</th>
                                                <th>Priority</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Paid Expenses -->
                        <div class="card">
                            <div class="card__header">
                                <h3>Paid Expenses</h3>
                                <span class="status status--info" id="paidCount">0 items</span>
                            </div>
                            <div class="card__body">
                                <div class="table-container">
                                    <table class="expense-table" id="paidTable">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Amount</th>
                                                <th>Category</th>
                                                <th>Date Paid</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Add Capital Modal -->
    <div class="modal hidden" id="addCapitalModal">
        <div class="modal__overlay">
            <div class="modal__content">
                <div class="modal__header">
                    <h3>Add Capital/Income</h3>
                    <button class="modal__close" id="closeCapitalModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal__body">
                    <form id="capitalForm">
                        <div class="form-group">
                            <label class="form-label" for="capitalSource">Source Name</label>
                            <input type="text" class="form-control" id="capitalSource" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="capitalAmount">Amount</label>
                            <input type="number" class="form-control" id="capitalAmount" min="0" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="capitalType">Type</label>
                            <select class="form-control" id="capitalType" required></select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="capitalDate">Date</label>
                            <input type="date" class="form-control" id="capitalDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="capitalDescription">Description/Notes</label>
                            <textarea class="form-control" id="capitalDescription" rows="3"></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn--outline" id="cancelCapitalBtn">Cancel</button>
                            <button type="submit" class="btn btn--primary">Add Capital</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Planned Expense Modal -->
    <div class="modal hidden" id="addPlannedModal">
        <div class="modal__overlay">
            <div class="modal__content">
                <div class="modal__header">
                    <h3>Add Planned Expense</h3>
                    <button class="modal__close" id="closePlannedModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal__body">
                    <form id="plannedExpenseForm">
                        <div class="form-group">
                            <label class="form-label" for="plannedName">Expense Name</label>
                            <input type="text" class="form-control" id="plannedName" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="plannedAmount">Amount</label>
                            <input type="number" class="form-control" id="plannedAmount" min="0" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="plannedCategory">Category</label>
                            <select class="form-control" id="plannedCategory" required></select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="plannedPriority">Priority</label>
                            <select class="form-control" id="plannedPriority" required></select>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn--outline" id="cancelPlannedBtn">Cancel</button>
                            <button type="submit" class="btn btn--primary">Add Expense</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Paid Expense Modal -->
    <div class="modal hidden" id="addPaidModal">
        <div class="modal__overlay">
            <div class="modal__content">
                <div class="modal__header">
                    <h3>Add Paid Expense</h3>
                    <button class="modal__close" id="closePaidModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal__body">
                    <form id="paidExpenseForm">
                        <div class="form-group">
                            <label class="form-label" for="paidName">Expense Name</label>
                            <input type="text" class="form-control" id="paidName" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="paidAmount">Amount</label>
                            <input type="number" class="form-control" id="paidAmount" min="0" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="paidCategory">Category</label>
                            <select class="form-control" id="paidCategory" required></select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="paidDate">Date Paid</label>
                            <input type="date" class="form-control" id="paidDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="paymentMethod">Payment Method</label>
                            <select class="form-control" id="paymentMethod" required></select>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn--outline" id="cancelPaidBtn">Cancel</button>
                            <button type="submit" class="btn btn--primary">Add Expense</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal hidden" id="editModal">
        <div class="modal__overlay">
            <div class="modal__content">
                <div class="modal__header">
                    <h3 id="editModalTitle">Edit Transaction</h3>
                    <button class="modal__close" id="closeEditModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal__body">
                    <form id="editForm">
                        <div id="editFormContent"></div>
                        <div class="form-actions">
                            <button type="button" class="btn btn--outline" id="cancelEditBtn">Cancel</button>
                            <button type="submit" class="btn btn--primary">Update</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
